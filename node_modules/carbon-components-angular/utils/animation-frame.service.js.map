{"version":3,"file":"animation-frame.service.js","sourceRoot":"","sources":["../src/utils/animation-frame.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAa,MAAM,eAAe,CAAC;AACtD,OAAO,EAAc,OAAO,EAAE,IAAI,EAAE,MAAM,MAAM,CAAC;AAEjD;IAQC;QAJU,gBAAW,GAAG,IAAI,OAAO,EAAU,CAAC;QAK7C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;QAC5C,IAAI,CAAC,gBAAgB,GAAG,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvE,CAAC;IAED,oDAAW,GAAX;QACC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IAC7C,CAAC;IAES,+CAAM,GAAhB,UAAiB,KAAa;QAC7B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7B,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/C,CAAC;;gBApBD,UAAU;;;;IAqBX,qCAAC;CAAA,AArBD,IAqBC;SApBY,8BAA8B;AAsB3C;IAIC,+BAAsB,SAAyC;QAAzC,cAAS,GAAT,SAAS,CAAgC;QAC9D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACvC,CAAC;;gBAND,UAAU;;;;gBAIuB,8BAA8B;;IAGhE,4BAAC;CAAA,AAPD,IAOC;SANY,qBAAqB","sourcesContent":["import { Injectable, OnDestroy } from \"@angular/core\";\nimport { Observable, Subject, from } from \"rxjs\";\n\n@Injectable()\nexport class AnimationFrameServiceSingleton implements OnDestroy {\n\tpublic tick: Observable<number>;\n\n\tprotected frameSource = new Subject<number>();\n\n\tprotected animationFrameId: number;\n\n\tconstructor() {\n\t\tthis.tick = this.frameSource.asObservable();\n\t\tthis.animationFrameId = requestAnimationFrame(this.doTick.bind(this));\n\t}\n\n\tngOnDestroy() {\n\t\tcancelAnimationFrame(this.animationFrameId);\n\t}\n\n\tprotected doTick(frame: number) {\n\t\tthis.frameSource.next(frame);\n\t\trequestAnimationFrame(this.doTick.bind(this));\n\t}\n}\n\n@Injectable()\nexport class AnimationFrameService {\n\tpublic tick: Observable<number>;\n\n\tconstructor(protected singleton: AnimationFrameServiceSingleton) {\n\t\tthis.tick = from(this.singleton.tick);\n\t}\n}\n"]}