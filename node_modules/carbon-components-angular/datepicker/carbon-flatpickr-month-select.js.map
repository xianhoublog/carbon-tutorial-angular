{"version":3,"file":"carbon-flatpickr-month-select.js","sourceRoot":"","sources":["../src/datepicker/carbon-flatpickr-month-select.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * This is from carbon-components.\n * We need it to format the month select according to specs.\n * Carbon currently doesn't expose this as a seperate package,\n * and we don't import the carbon-components js (on purpose)\n * so some copy pasta is required\n *\n * ref: https://github.com/carbon-design-system/carbon/blob/\n * \tf06f38f0c2ef624e409a3d5711e897a79f4c88fc/packages/components/src/components/date-picker/date-picker.js#L52-L123\n */\n\nconst monthToStr = (monthNumber, shorthand, locale) =>\n\tlocale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber];\n\nconst config = {\n\tselectorInit: \"[data-date-picker]\",\n\tselectorDatePickerInput: \"[data-date-picker-input]\",\n\tselectorDatePickerInputFrom: \"[data-date-picker-input-from]\",\n\tselectorDatePickerInputTo: \"[data-date-picker-input-to]\",\n\tselectorDatePickerIcon: \"[data-date-picker-icon]\",\n\tselectorFlatpickrMonthYearContainer: \".flatpickr-current-month\",\n\tselectorFlatpickrYearContainer: \".numInputWrapper\",\n\tselectorFlatpickrCurrentMonth: \".cur-month\",\n\tclassCalendarContainer: `bx--date-picker__calendar`,\n\tclassMonth: `bx--date-picker__month`,\n\tclassWeekdays: `bx--date-picker__weekdays`,\n\tclassDays: `bx--date-picker__days`,\n\tclassWeekday: `bx--date-picker__weekday`,\n\tclassDay: `bx--date-picker__day`,\n\tclassFocused: `bx--focused`,\n\tclassVisuallyHidden: `bx--visually-hidden`,\n\tclassFlatpickrCurrentMonth: \"cur-month\",\n\tattribType: \"data-date-picker-type\",\n\tdateFormat: \"m/d/Y\",\n\tshorthand: false\n};\n\nexport const carbonFlatpickrMonthSelectPlugin = fp => {\n\tconst setupElements = () => {\n\t\tif (!fp.monthElements) {\n\t\t\treturn;\n\t\t}\n\t\tfp.monthElements.forEach(elem => {\n\t\t\tif (!elem.parentNode) { return; }\n\t\t\telem.parentNode.removeChild(elem);\n\t\t});\n\t\tfp.monthElements.splice(\n\t\t\t0,\n\t\t\tfp.monthElements.length,\n\t\t\t...fp.monthElements.map(() => {\n\t\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\t\tconst monthElement = fp._createElement(\n\t\t\t\t\t\"span\",\n\t\t\t\t\tconfig.classFlatpickrCurrentMonth\n\t\t\t\t);\n\t\t\t\tmonthElement.textContent = monthToStr(\n\t\t\t\t\tfp.currentMonth,\n\t\t\t\t\tconfig.shorthand === true,\n\t\t\t\t\tfp.l10n\n\t\t\t\t);\n\t\t\t\tfp.yearElements[0]\n\t\t\t\t\t.closest(config.selectorFlatpickrMonthYearContainer)\n\t\t\t\t\t.insertBefore(\n\t\t\t\t\t\tmonthElement,\n\t\t\t\t\t\tfp.yearElements[0].closest(config.selectorFlatpickrYearContainer)\n\t\t\t\t\t);\n\t\t\t\treturn monthElement;\n\t\t\t})\n\t\t);\n\t};\n\tconst updateCurrentMonth = () => {\n\t\tconst monthStr = monthToStr(\n\t\t\tfp.currentMonth,\n\t\t\tconfig.shorthand === true,\n\t\t\tfp.l10n\n\t\t);\n\t\tfp.yearElements.forEach(elem => {\n\t\t\tconst currentMonthContainer = elem.closest(\n\t\t\t\tconfig.selectorFlatpickrMonthYearContainer\n\t\t\t);\n\t\t\tArray.prototype.forEach.call(\n\t\t\t\tcurrentMonthContainer.querySelectorAll(\".cur-month\"),\n\t\t\t\tmonthElement => {\n\t\t\t\t\tmonthElement.textContent = monthStr;\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t};\n\n\tconst register = () => {\n\t\tfp.loadedPlugins.push(\"carbonFlatpickrMonthSelectPlugin\");\n\t};\n\n\treturn {\n\t\tonMonthChange: updateCurrentMonth,\n\t\tonValueUpdate: updateCurrentMonth,\n\t\tonOpen: updateCurrentMonth,\n\t\tonReady: [setupElements, updateCurrentMonth, register]\n\t};\n};\n"]}